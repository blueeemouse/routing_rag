# GraphRAG Index Configuration for HotpotQA Dataset
# 用于HotpotQA数据集的GraphRAG索引配置

# 根目录
root_dir: "D:/Develop/all_RAG/routing_rag/HotpotQA"

# 语言模型配置
models:
  gpt-4-turbo:
    type: "chat"
    api_key: "${GRAPHRAG_API_KEY}"  # 从环境变量获取
    model: "deepseek-v3"
    api_base: "https://api.agicto.cn/v1/chat/completions"
    temperature: 0
    max_tokens: 4096
    request_timeout: 180.0
    concurrent_requests: 25
  text-embedding-ada-002:
    type: "embedding"
    api_key: "${GRAPHRAG_API_KEY}"  # 从环境变量获取
    model: "text-embedding-ada-002"
    api_base: "https://api.agicto.cn/v1/chat/completions"
    request_timeout: 180.0
    concurrent_requests: 25

# 输入配置
input:
  type: "file"  # 输入类型
  file_type: "json"  # JSON文件类型
  file_pattern: ".*\\.json$"  # 匹配json文件
  base_dir: "D:/Develop/all_RAG/routing_rag/HotpotQA/raw"  # 输入数据路径
  encoding: "utf-8"
  text_column: "question"  # 用于索引的文本列，针对HotpotQA可能需要调整

# 输出配置
output:
  type: "file"  # 输出类型
  base_dir: "D:/Develop/all_RAG/routing_rag/HotpotQA/indexed"  # 输出路径

# 缓存配置
cache:
  type: "file"
  base_dir: "D:/Develop/all_RAG/routing_rag/HotpotQA/cache"  # 缓存路径

# 日志/报告配置
reporting:
  type: "file"
  base_dir: "D:/Develop/all_RAG/routing_rag/HotpotQA/logs"  # 日志路径

# 文本分块配置
chunks:
  size: 1200
  overlap: 100
  group_by_columns: ["id"]

# 实体提取配置
extract_graph:
  prompt: null  # 使用默认提示
  entity_types: ["organization", "person", "geo", "event", "date", "amount", "law", "policy", "product", "topic", "subject"]  # 定义实体类型
  max_gleanings: 1  # 每次提取的最大额外实体数
  model: "gpt-4-turbo"  # 使用的模型

# 关系提取配置
embed_graph:
  enabled: true  # 启用图嵌入
  dimensions: 1536  # 嵌入维度
  num_walks: 10
  walk_length: 40

# 社区发现配置
cluster_graph:
  max_cluster_size: 10
  use_lcc: true  # 使用最大连通分量

# 社区报告配置
community_reports:
  max_length: 2000
  max_input_length: 8000

# 摘要描述配置
summarize_descriptions:
  max_length: 500
  max_input_tokens: 4000

# 图剪枝配置
prune_graph:
  min_node_degree: 1
  min_edge_weight_pct: 40.0

# 文本嵌入配置
embeddings:
  model: "text-embedding-ada-002"  # 嵌入模型
  batch_size: 16
  batch_max_tokens: 8191

# 快照配置
snapshots:
  embeddings: false
  graphml: false
  raw_graph: false